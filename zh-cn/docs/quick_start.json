{
  "filename": "quick_start.md",
  "__html": "<h1>安装 OpenKruise</h1>\n<p>OpenKruise 要求 Kubernetes 的版本大于等于 <code>v1.12</code>.</p>\n<h2>通过 helm charts 安装</h2>\n<p>目前最新的 Kruise 稳定版本是 <code>v0.6.1</code>。我们建议你采用 helm v3.1+ 来安装 Kruise，helm 是一个简单的命令行工具可以从<a href=\"https://github.com/helm/helm/releases\">这里</a>获取。</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># Kubernetes 1.14 和更老的版本</span>\nhelm install kruise https://github.com/openkruise/kruise/releases/download/v0.6.1/kruise-chart.tgz --<span class=\"hljs-built_in\">disable</span>-openapi-validation\n<span class=\"hljs-comment\"># Kubernetes 1.15 和更新的版本</span>\nhelm install kruise https://github.com/openkruise/kruise/releases/download/v0.6.1/kruise-chart.tgz\n</code></pre>\n<p>执行结果如下：</p>\n<pre><code class=\"language-shell\">NAME: kruise\nLAST DEPLOYED: Mon Jun 15 20:00:00 2020\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\n</code></pre>\n<h3>可选: chart 安装参数</h3>\n<p>注意直接安装 chart 会使用默认的 template values，你也可以根据你的集群情况指定一些特殊配置，比如修改 resources 限制或者只启用某些特定的控制器能力。</p>\n<p>下表展示了 chart 所有可配置的参数和它们的默认值：</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Description</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>log.level</code></td>\n<td>Log level that kruise-manager printed</td>\n<td><code>4</code></td>\n</tr>\n<tr>\n<td><code>revisionHistoryLimit</code></td>\n<td>Limit of revision history</td>\n<td><code>3</code></td>\n</tr>\n<tr>\n<td><code>manager.replicas</code></td>\n<td>Replicas of kruise-controller-manager deployment</td>\n<td><code>2</code></td>\n</tr>\n<tr>\n<td><code>manager.image.repository</code></td>\n<td>Repository for kruise-manager image</td>\n<td>openkruise/kruise-manager</td>\n</tr>\n<tr>\n<td><code>manager.image.tag</code></td>\n<td>Tag for kruise-manager image</td>\n<td>v0.6.0</td>\n</tr>\n<tr>\n<td><code>manager.resources.limits.cpu</code></td>\n<td>CPU resource limit of kruise-manager container</td>\n<td><code>100m</code></td>\n</tr>\n<tr>\n<td><code>manager.resources.limits.memory</code></td>\n<td>Memory resource limit of kruise-manager container</td>\n<td><code>256Mi</code></td>\n</tr>\n<tr>\n<td><code>manager.resources.requests.cpu</code></td>\n<td>CPU resource request of kruise-manager container</td>\n<td><code>100m</code></td>\n</tr>\n<tr>\n<td><code>manager.resources.requests.memory</code></td>\n<td>Memory resource request of kruise-manager container</td>\n<td><code>256Mi</code></td>\n</tr>\n<tr>\n<td><code>manager.metrics.addr</code></td>\n<td>Addr of metrics served</td>\n<td><code>localhost</code></td>\n</tr>\n<tr>\n<td><code>manager.metrics.port</code></td>\n<td>Port of metrics served</td>\n<td><code>8080</code></td>\n</tr>\n<tr>\n<td><code>manager.webhook.port</code></td>\n<td>Port of webhook served</td>\n<td><code>9443</code></td>\n</tr>\n<tr>\n<td><code>manager.custom_resource_enable</code></td>\n<td>Custom resources enabled by kruise-manager</td>\n<td><code>&quot;&quot;(empty means all enabled)</code></td>\n</tr>\n<tr>\n<td><code>spec.nodeAffinity</code></td>\n<td>Node affinity policy for kruise-manager pod</td>\n<td><code>{}</code></td>\n</tr>\n<tr>\n<td><code>spec.nodeSelector</code></td>\n<td>Node labels for kruise-manager pod</td>\n<td><code>{}</code></td>\n</tr>\n<tr>\n<td><code>spec.tolerations</code></td>\n<td>Tolerations for kruise-manager pod</td>\n<td><code>[]</code></td>\n</tr>\n<tr>\n<td><code>webhookConfiguration.failurePolicy.pods</code></td>\n<td>The failurePolicy for pods in mutating webhook configuration</td>\n<td><code>Ignore</code></td>\n</tr>\n</tbody>\n</table>\n<p>这些参数可以通过 <code>--set key=value[,key=value]</code> 参数在 <code>helm install</code> 命令中生效。</p>\n<h3>可选: 启用特定 CRD 功能</h3>\n<p>如果你只需要使用某些 Kruise 中的控制器并关闭其他的控制器，你可以做以下两个方式或同时做：</p>\n<ol>\n<li>只安装你需要使用的 CRD。</li>\n<li>在 kruise-manager 容器中设置 <code>CUSTOM_RESOURCE_ENABLE</code> 环境变量，指定你需要启用的 CRD 名字。在 helm chart 安装的时候可以使用以下参数：</li>\n</ol>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> helm install kruise https://github.com/openkruise/kruise/releases/download/v0.6.1/kruise-chart.tgz --<span class=\"hljs-built_in\">set</span> manager.custom_resource_enable=<span class=\"hljs-string\">\"CloneSet\\,SidecarSet\"</span></span>\n...\n</code></pre>\n<p>比如，<code>CUSTOM_RESOURCE_ENABLE=CloneSet,SidecarSet</code> 表示只启用 CloneSet 和 SidecarSet 的 controller/ webhook，其他资源的 controllers/webhooks 都会关闭。</p>\n<h2>卸载</h2>\n<p>注意：卸载会导致所有 Kruise 下的资源都会删除掉，包括 webhook configurations, services, namespace, CRDs, CR instances 以及所有 Kruise workload 下的 Pod。 请务必谨慎操作！</p>\n<p>卸载使用 helm chart 安装的 Kruise：</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> helm uninstall kruise</span>\nrelease \"kruise\" uninstalled\n</code></pre>\n",
  "link": "/zh-cn/docs/quick_start.html",
  "meta": {
    "title": "快速开始"
  }
}